{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function pixabayApi(findText, page) {\n    try {\n        const BASE_URL = 'https://pixabay.com/api/';\n        const params = new URLSearchParams({\n            key: '44082899-a223f277c19d17b254d670762',\n            q: findText,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: 'true',\n            per_page: 15,\n            page: page,\n        });\n        const url = `${BASE_URL}?${params}`;\n        const response = await axios.get(url);\n        return response.data;\n    } catch (error) {\n        iziToast.error({\n            position: 'topRight',\n            message: 'Error',\n        });\n    }\n}","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nexport function imagesRender(arr) {\n    return arr\n        .map(\n            arr =>\n                `<li class=\"gallery-list\"><div class=\"gallery\"><a href=\"${arr.largeImageURL}\"><img src=\"${arr.webformatURL}\" alt=\"${arr.tags}\" width=\"360px\" height=\"100px\"></a>\n      <ul class=\"img-cont-list\">\n      <li class=\"img-cont-item\">Likes<p class=\"img-cont-descr\">${arr.likes}</p></li>\n      <li class=\"img-cont-item\">Views<p class=\"img-cont-descr\">${arr.views}</p></li>\n      <li class=\"img-cont-item\">Comments<p class=\"img-cont-descr\">${arr.comments}</p></li>\n      <li class=\"img-cont-item\">Downloads<p class=\"img-cont-descr\">${arr.downloads}</p></li>\n      </ul>\n      </div>\n      </li>`\n        )\n        .join('');\n}\nexport function imgBoxLight() {\n    let gallery = new SimpleLightbox('.gallery a', {\n        navText: ['&#5176;', '&#5171;'],\n        captionsData: 'alt',\n        captionDelay: 250,\n    });\n    gallery.refresh();\n}","import { pixabayApi } from './js/pixabay-api';\nimport { imagesRender, imgBoxLight } from './js/render-functions';\nimport axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('.find-form');\nconst gallery = document.querySelector('.gallery-container');\nconst loadMore = document.querySelector('.btn');\nconst loaderPlace = document.querySelector('#load');\nconst submitBtn = document.querySelector('.find-btn')\n\nlet page = 1;\nlet findText = '';\n\nform.addEventListener('submit', async (event) => {\n    event.preventDefault();\n    page = 1;\n    gallery.innerHTML = '';\n    findText = new FormData(form).get('find-text');\n\n    if (!findText) {\n        loadMore.style.display = 'none';\n        iziToast.error({\n            position: 'topRight',\n            message: 'Sorry, there are no images matching your search query. Please try again!',\n        });\n        return;\n    }\n\n    gallery.innerHTML = `<div class=\"loader\"></div>`;\n    try {\n        const data = await pixabayApi(findText, page);\n        if (data.hits.length === 0) {\n            iziToast.error({\n                position: 'topRight',\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n            });\n            gallery.innerHTML = '';\n            loadMore.style.display = 'none';\n            return;\n        }\n        gallery.innerHTML = imagesRender(data.hits);\n        imgBoxLight();\n    } catch {\n        iziToast.error({\n            position: 'topRight',\n            message: 'Ooops',\n        });\n    } finally {\n        event.target.reset()\n        loadMore.style.display = 'block';\n    }\n});\n\nloadMore.addEventListener('click', onLoadMore);\n\nasync function onLoadMore() {\n\n    loadMore.style.display = 'none';\n    page += 1;\n    loaderPlace.innerHTML = `<div class=\"loading\">Loading...  <span class=\"loader\"></span></div>`;\n\n    try {\n        const data = await pixabayApi(findText, page);\n        if (data.hits.length === 0) {\n            iziToast.info({\n                position: 'topRight',\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n            });\n            loadMore.style.display = 'none';\n        } else {\n            gallery.insertAdjacentHTML('beforeend', imagesRender(data.hits));\n            imgBoxLight();\n            window.scrollBy({\n                top: 720,\n                behavior: 'smooth',\n            });\n            loadMore.style.display = 'block';\n        }\n    } catch {\n        iziToast.error({\n            position: 'topRight',\n            message: \"We're sorry, but you've reached the end of search results.\",\n        });\n        loadMore.style.display = 'none';\n    } finally {\n        loaderPlace.innerHTML = '';\n\n    }\n}"],"names":["pixabayApi","findText","page","BASE_URL","params","url","axios","imagesRender","arr","imgBoxLight","SimpleLightbox","form","gallery","loadMore","loaderPlace","event","iziToast","data","onLoadMore"],"mappings":"owBAEO,eAAeA,EAAWC,EAAUC,EAAM,CAC7C,GAAI,CACA,MAAMC,EAAW,2BACXC,EAAS,IAAI,gBAAgB,CAC/B,IAAK,qCACL,EAAGH,EACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,SAAU,GACV,KAAMC,CAClB,CAAS,EACKG,EAAM,GAAGF,CAAQ,IAAIC,CAAM,GAEjC,OADiB,MAAME,EAAM,IAAID,CAAG,GACpB,IACnB,MAAe,CACZ,SAAS,MAAM,CACX,SAAU,WACV,QAAS,OACrB,CAAS,CACJ,CACL,CCrBO,SAASE,EAAaC,EAAK,CAC9B,OAAOA,EACF,IACGA,GACI,0DAA0DA,EAAI,aAAa,eAAeA,EAAI,YAAY,UAAUA,EAAI,IAAI;AAAA;AAAA,iEAE3EA,EAAI,KAAK;AAAA,iEACTA,EAAI,KAAK;AAAA,oEACNA,EAAI,QAAQ;AAAA,qEACXA,EAAI,SAAS;AAAA;AAAA;AAAA,YAIzE,EACA,KAAK,EAAE,CAChB,CACO,SAASC,GAAc,CACZ,IAAIC,EAAe,aAAc,CAC3C,QAAS,CAAC,UAAW,SAAS,EAC9B,aAAc,MACd,aAAc,GACtB,CAAK,EACO,QAAO,CACnB,CCnBA,MAAMC,EAAO,SAAS,cAAc,YAAY,EAC1CC,EAAU,SAAS,cAAc,oBAAoB,EACrDC,EAAW,SAAS,cAAc,MAAM,EACxCC,EAAc,SAAS,cAAc,OAAO,EAChC,SAAS,cAAc,WAAW,EAEpD,IAAIZ,EAAO,EACPD,EAAW,GAEfU,EAAK,iBAAiB,SAAU,MAAOI,GAAU,CAM7C,GALAA,EAAM,eAAc,EACpBb,EAAO,EACPU,EAAQ,UAAY,GACpBX,EAAW,IAAI,SAASU,CAAI,EAAE,IAAI,WAAW,EAEzC,CAACV,EAAU,CACXY,EAAS,MAAM,QAAU,OACzBG,EAAS,MAAM,CACX,SAAU,WACV,QAAS,0EACrB,CAAS,EACD,MACH,CAEDJ,EAAQ,UAAY,6BACpB,GAAI,CACA,MAAMK,EAAO,MAAMjB,EAAWC,EAAUC,CAAI,EAC5C,GAAIe,EAAK,KAAK,SAAW,EAAG,CACxBD,EAAS,MAAM,CACX,SAAU,WACV,QAAS,0EACzB,CAAa,EACDJ,EAAQ,UAAY,GACpBC,EAAS,MAAM,QAAU,OACzB,MACH,CACDD,EAAQ,UAAYL,EAAaU,EAAK,IAAI,EAC1CR,GACR,MAAY,CACJO,EAAS,MAAM,CACX,SAAU,WACV,QAAS,OACrB,CAAS,CACT,QAAc,CACND,EAAM,OAAO,MAAO,EACpBF,EAAS,MAAM,QAAU,OAC5B,CACL,CAAC,EAEDA,EAAS,iBAAiB,QAASK,CAAU,EAE7C,eAAeA,GAAa,CAExBL,EAAS,MAAM,QAAU,OACzBX,GAAQ,EACRY,EAAY,UAAY,sEAExB,GAAI,CACA,MAAMG,EAAO,MAAMjB,EAAWC,EAAUC,CAAI,EACxCe,EAAK,KAAK,SAAW,GACrBD,EAAS,KAAK,CACV,SAAU,WACV,QAAS,0EACzB,CAAa,EACDH,EAAS,MAAM,QAAU,SAEzBD,EAAQ,mBAAmB,YAAaL,EAAaU,EAAK,IAAI,CAAC,EAC/DR,IACA,OAAO,SAAS,CACZ,IAAK,IACL,SAAU,QAC1B,CAAa,EACDI,EAAS,MAAM,QAAU,QAErC,MAAY,CACJG,EAAS,MAAM,CACX,SAAU,WACV,QAAS,4DACrB,CAAS,EACDH,EAAS,MAAM,QAAU,MACjC,QAAc,CACNC,EAAY,UAAY,EAE3B,CACL"}