{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function pixabayApi(findText, page) {\n    try {\n        const BASE_URL = 'https://pixabay.com/api/';\n        const params = new URLSearchParams({\n            key: '44082899-a223f277c19d17b254d670762',\n            q: findText,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: 'true',\n            per_page: 15,\n            page: page,\n        });\n        const url = `${BASE_URL}?${params}`;\n        const response = await axios.get(url);\n        return response.data;\n    } catch (error) {\n        iziToast.error({\n            position: 'topRight',\n            message: 'Error',\n        });\n    }\n}","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nexport function imagesRender(arr) {\n    return arr\n        .map(\n            arr =>\n                `<li class=\"gallery-list\"><div class=\"gallery\"><a href=\"${arr.largeImageURL}\"><img src=\"${arr.webformatURL}\" alt=\"${arr.tags}\" width=\"360px\" height=\"100px\"></a>\n      <ul class=\"img-cont-list\">\n      <li class=\"img-cont-item\">Likes<p class=\"img-cont-descr\">${arr.likes}</p></li>\n      <li class=\"img-cont-item\">Views<p class=\"img-cont-descr\">${arr.views}</p></li>\n      <li class=\"img-cont-item\">Comments<p class=\"img-cont-descr\">${arr.comments}</p></li>\n      <li class=\"img-cont-item\">Downloads<p class=\"img-cont-descr\">${arr.downloads}</p></li>\n      </ul>\n      </div>\n      </li>`\n        )\n        .join('');\n}\nexport function imgBoxLight() {\n    let gallery = new SimpleLightbox('.gallery a', {\n        navText: ['&#5176;', '&#5171;'],\n        captionsData: 'alt',\n        captionDelay: 250,\n    });\n    gallery.refresh();\n}","import { pixabayApi } from './js/pixabay-api';\nimport { imagesRender } from './js/render-functions';\nimport { imgBoxLight } from './js/render-functions';\n\nimport axios from 'axios';\n\nimport iziToast from 'izitoast';\n\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('.find-form');\nconst gallery = document.querySelector('.gallery-container');\nconst loader = document.querySelector('.loader');\nconst loadMore = document.querySelector('.btn');\nconst loaderPlace = document.querySelector('#load');\n\n\nloadMore.addEventListener('click', onLoadMore);\n\nlet page = 1;\nlet findText = '';\nform.addEventListener('submit', async event => {\n    event.preventDefault();\n    gallery.innerHTML = '';\n    const formData = new FormData(form);\n    const findText = formData.get('find-text');\n\n    if (findText === '') {\n        return;\n    }\n\n    gallery.innerHTML = `<div class = \"loading\">Loading...  <span class=\"loader\"></span></div>`;\n\n    try {\n        const data = await pixabayApi(findText, page);\n        if (data.hits.length === 0) {\n            iziToast.error({\n                position: 'topRight',\n                message:\n                    'Sorry, there are no images matching your search query. Please try again!',\n            });\n            gallery.innerHTML = '';\n            return;\n        }\n\n        const markup = imagesRender(data.hits);\n        gallery.innerHTML = markup;\n        imgBoxLight();\n    } catch (error) {\n        iziToast.error({\n            position: 'topRight',\n            message: 'Error',\n        });\n    } finally {\n        event.target.reset();\n        loadMore.classList.remove('hidden');\n    }\n});\n\nasync function onLoadMore() {\n    loadMore.classList.add('hidden');\n    page += 1;\n\n    loaderPlace.innerHTML = `<div class = \"loading\">Loading...  <span class=\"loader\"></span></div>`;\n    try {\n        const data = await pixabayApi(findText, page);\n        if (data.hits.length === 0) {\n            loadMore.classList.add('hidden');\n\n            iziToast.info({\n                position: 'topRight',\n                message:\n                    'Sorry, there are no images matching your search query. Please try again!',\n            });\n        }\n\n        loaderPlace.innerHTML = '';\n        loadMore.classList.add('hidden');\n        loadMore.disable = true;\n        const markup = imagesRender(data.hits);\n        gallery.insertAdjacentHTML('beforeend', markup);\n\n        loadMore.disable = true;\n        imgBoxLight();\n        window.scrollBy({\n            top: 720,\n            behavior: 'smooth',\n        });\n\n\n    } catch (error) {\n        iziToast.error({\n            position: 'topRight',\n            message: error.message,\n        });\n    } finally {\n        loadMore.classList.remove('hidden')\n    }\n}\n"],"names":["pixabayApi","findText","page","BASE_URL","params","url","axios","imagesRender","arr","imgBoxLight","SimpleLightbox","form","gallery","loadMore","loaderPlace","onLoadMore","event","data","iziToast","markup","error"],"mappings":"owBAEO,eAAeA,EAAWC,EAAUC,EAAM,CAC7C,GAAI,CACA,MAAMC,EAAW,2BACXC,EAAS,IAAI,gBAAgB,CAC/B,IAAK,qCACL,EAAGH,EACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,SAAU,GACV,KAAMC,CAClB,CAAS,EACKG,EAAM,GAAGF,CAAQ,IAAIC,CAAM,GAEjC,OADiB,MAAME,EAAM,IAAID,CAAG,GACpB,IACnB,MAAe,CACZ,SAAS,MAAM,CACX,SAAU,WACV,QAAS,OACrB,CAAS,CACJ,CACL,CCrBO,SAASE,EAAaC,EAAK,CAC9B,OAAOA,EACF,IACGA,GACI,0DAA0DA,EAAI,aAAa,eAAeA,EAAI,YAAY,UAAUA,EAAI,IAAI;AAAA;AAAA,iEAE3EA,EAAI,KAAK;AAAA,iEACTA,EAAI,KAAK;AAAA,oEACNA,EAAI,QAAQ;AAAA,qEACXA,EAAI,SAAS;AAAA;AAAA;AAAA,YAIzE,EACA,KAAK,EAAE,CAChB,CACO,SAASC,GAAc,CACZ,IAAIC,EAAe,aAAc,CAC3C,QAAS,CAAC,UAAW,SAAS,EAC9B,aAAc,MACd,aAAc,GACtB,CAAK,EACO,QAAO,CACnB,CCfA,MAAMC,EAAO,SAAS,cAAc,YAAY,EAC1CC,EAAU,SAAS,cAAc,oBAAoB,EAC5C,SAAS,cAAc,SAAS,EAC/C,MAAMC,EAAW,SAAS,cAAc,MAAM,EACxCC,EAAc,SAAS,cAAc,OAAO,EAGlDD,EAAS,iBAAiB,QAASE,CAAU,EAE7C,IAAIb,EAAO,EACPD,EAAW,GACfU,EAAK,iBAAiB,SAAU,MAAMK,GAAS,CAC3CA,EAAM,eAAc,EACpBJ,EAAQ,UAAY,GAEpB,MAAMX,EADW,IAAI,SAASU,CAAI,EACR,IAAI,WAAW,EAEzC,GAAIV,IAAa,GAIjB,CAAAW,EAAQ,UAAY,wEAEpB,GAAI,CACA,MAAMK,EAAO,MAAMjB,EAAWC,EAAUC,CAAI,EAC5C,GAAIe,EAAK,KAAK,SAAW,EAAG,CACxBC,EAAS,MAAM,CACX,SAAU,WACV,QACI,0EACpB,CAAa,EACDN,EAAQ,UAAY,GACpB,MACH,CAED,MAAMO,EAASZ,EAAaU,EAAK,IAAI,EACrCL,EAAQ,UAAYO,EACpBV,GACH,MAAe,CACZS,EAAS,MAAM,CACX,SAAU,WACV,QAAS,OACrB,CAAS,CACT,QAAc,CACNF,EAAM,OAAO,QACbH,EAAS,UAAU,OAAO,QAAQ,CACrC,EACL,CAAC,EAED,eAAeE,GAAa,CACxBF,EAAS,UAAU,IAAI,QAAQ,EAC/BX,GAAQ,EAERY,EAAY,UAAY,wEACxB,GAAI,CACA,MAAMG,EAAO,MAAMjB,EAAWC,EAAUC,CAAI,EACxCe,EAAK,KAAK,SAAW,IACrBJ,EAAS,UAAU,IAAI,QAAQ,EAE/BK,EAAS,KAAK,CACV,SAAU,WACV,QACI,0EACpB,CAAa,GAGLJ,EAAY,UAAY,GACxBD,EAAS,UAAU,IAAI,QAAQ,EAC/BA,EAAS,QAAU,GACnB,MAAMM,EAASZ,EAAaU,EAAK,IAAI,EACrCL,EAAQ,mBAAmB,YAAaO,CAAM,EAE9CN,EAAS,QAAU,GACnBJ,IACA,OAAO,SAAS,CACZ,IAAK,IACL,SAAU,QACtB,CAAS,CAGJ,OAAQW,EAAO,CACZF,EAAS,MAAM,CACX,SAAU,WACV,QAASE,EAAM,OAC3B,CAAS,CACT,QAAc,CACNP,EAAS,UAAU,OAAO,QAAQ,CACrC,CACL"}